<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Конфигурация - VK Photo Uploader</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1><i class="fas fa-cog"></i> Конфигурация загрузки</h1>
            <p class="subtitle">Настройте параметры загрузки без отправки фотографий на сервер</p>
        </header>
        
        <main class="main-content">
            <div class="card">
                <div class="back-link">
                    <a href="{{ url_for('index') }}" class="btn btn-secondary">
                        <i class="fas fa-home"></i> На главную
                    </a>
                </div>
                
                {% if error %}
                <div class="alert alert-error" style="background: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px; margin-bottom: 20px; border: 1px solid #f5c6cb;">
                    <i class="fas fa-exclamation-triangle"></i> {{ error }}
                </div>
                {% endif %}
                
                <div style="margin-bottom: 30px; padding: 20px; background: #e7f3ff; border-radius: 10px;">
                    <h3><i class="fas fa-info-circle"></i> Как это работает:</h3>
                    <ol style="margin-left: 20px; margin-top: 10px;">
                        <li>Вы настраиваете конфигурацию здесь</li>
                        <li>Сервер создает инструкции для локального выполнения</li>
                        <li>Вы скачиваете скрипт и запускаете его на своем компьютере</li>
                        <li>Фотографии загружаются напрямую с вашего компьютера в VK</li>
                        <li>Нет ограничений по размеру и количеству фотографий</li>
                    </ol>
                </div>
                
                <form method="POST" enctype="multipart/form-data">
                    <div class="form-section">
                        <h2><i class="fas fa-file-code"></i> 1. Конфигурация VK API</h2>
                        <p class="form-description">Содержимое файла config.txt с токеном доступа</p>
                        
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: bold;">
                                <i class="fas fa-upload"></i> Или загрузите config.txt:
                            </label>
                            <input type="file" name="config_file" accept=".txt" style="margin-bottom: 10px;">
                        </div>
                        
                        <div>
                            <label style="display: block; margin-bottom: 8px; font-weight: bold;">
                                <i class="fas fa-edit"></i> Или вставьте текст конфигурации:
                            </label>
                            <textarea name="config_text" rows="8" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; font-family: monospace;" placeholder="access_token=ваш_токен
group_id=123456789
album_id=123456789
# owner_id=-123456789">{{ request.form.get('config_text', '') }}</textarea>
                        </div>
                        
                        <div class="file-hint">
                            <i class="fas fa-info-circle"></i> Обязательный файл с токеном доступа к VK API
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <h2><i class="fas fa-table"></i> 2. CSV файл с данными</h2>
                        <p class="form-description">Содержимое файла photos.csv со списком фотографий</p>
                        
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 8px; font-weight: bold;">
                                <i class="fas fa-upload"></i> Или загрузите photos.csv:
                            </label>
                            <input type="file" name="csv_file" accept=".csv" style="margin-bottom: 10px;">
                        </div>
                        
                        <div>
                            <label style="display: block; margin-bottom: 8px; font-weight: bold;">
                                <i class="fas fa-edit"></i> Или вставьте CSV данные:
                            </label>
                            <textarea name="csv_text" rows="12" style="width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; font-family: monospace;" placeholder="sep=|
Файл изображения|Описание|Файлы в комментариях
photo1.jpg|Описание фото 1|photo2.jpg; photo3.jpg
photo2.jpg|Описание фото 2|photo4.jpg">{{ request.form.get('csv_text', '') }}</textarea>
                        </div>
                        
                        <div class="file-hint">
                            <i class="fas fa-info-circle"></i> CSV файл с информацией о фотографиях
                        </div>
                    </div>
                    
                    <div class="form-section" style="background: #f8f9fa; padding: 20px; border-radius: 10px;">
                        <h3><i class="fas fa-lightbulb"></i> Важно знать:</h3>
                        <ul style="margin-left: 20px; margin-top: 10px;">
                            <li>Фотографии <strong>НЕ</strong> загружаются на этот сервер</li>
                            <li>Все файлы должны быть в одной папке на вашем компьютере</li>
                            <li>Скрипт проверит наличие файлов перед запуском</li>
                            <li>Нет ограничений по количеству фотографий</li>
                            <li>Рекомендуется использовать локальную версию для больших объемов</li>
                        </ul>
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary btn-large">
                            <i class="fas fa-rocket"></i> Создать задание для локального выполнения
                        </button>
                    </div>
                </form>
            </div>
        </main>
        
        <footer class="footer">
            <p>Фотографии остаются на вашем компьютере и загружаются напрямую в VK API</p>
        </footer>
    </div>
</body>
</html>